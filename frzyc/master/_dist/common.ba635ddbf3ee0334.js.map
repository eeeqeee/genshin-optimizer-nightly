{"version":3,"file":"common.ba635ddbf3ee0334.js","mappings":"qSAae,SAASA,EAAwB,GAW7C,IAX6C,UAC9CC,EAAS,aACTC,EAAY,MACZC,EAAQ,IAQT,EAPIC,GAAK,YAQR,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,IAAe,CAAC,WAAY,sBAC1CH,EAAQA,GAAgBE,EAAE,mCAE1B,MAAME,GAAUC,EAAAA,EAAAA,UACd,IACEC,OAAOC,QAAQC,EAAAA,IACZC,SAAQ,EAAEC,EAAQC,KACjBA,EAAKC,KAAKC,IAAG,CACXC,IAAKD,EACLb,MAAOE,EAAG,qBAAoBW,KAC9BE,SAAUL,QAGbM,KAAKC,EAAAA,IACV,CAACf,IAGGgB,GAAQC,EAAAA,EAAAA,cACXL,GACCA,GAAM,QAAC,IAAO,CAACM,KAAKC,EAAAA,EAAAA,IAAgBP,GAAMQ,KAAM,SAAQC,GAC1D,IAEIC,GAAWL,EAAAA,EAAAA,cACdM,GAAkC1B,EAAc,MAAD0B,EAAAA,EAAK,KACrD,CAAC1B,IAEH,OACE,QAAC,IAAmB,eAClBK,QAASA,EACTsB,SAAU5B,EACV0B,SAAUA,EACVN,MAAOA,EACPlB,MAAOA,EACP2B,QAAUC,IAAM,eAA+B,OAA/B,EAAmB,OAAnB,EAAKA,EAAOb,cAAO,EAAd,EAAgBc,YAAU,EAAI,EAAE,EACrDC,YAAcC,GACZA,EAAOC,QACL,QAAC,IAAI,CAAoBC,UAAWC,EAAAA,EAAI,WACtC,QAAC,IAAa,CAA+BC,GAAI,CAAEC,IAAK,QAAS,UAC9DL,EAAOC,MAAO,KACf,QAAC,IAAY,CAACK,OAAQN,EAAOC,MAAyBM,QAAM,MAFzC,GAAEP,EAAOC,eAI7BD,EAAOQ,WALCR,EAAOC,QASlB/B,GAGV,C,gDCxEA,MAKA,GALqBuC,E,SAAAA,IAAO,MAAPA,CAAc,CACjCC,MAAO,OACPC,OAAQ,Q,gICAJC,GAAiBH,EAAAA,EAAAA,IAAOI,EAAAA,EAAPJ,EAAe,EAAGK,YAAY,CACnD,iBAAkB,CAChBC,gBAAiBD,EAAME,QAAQC,QAAQC,KACvCC,MAAOL,EAAME,QAAQI,KAAKC,eAIf,SAASC,EAAW,GAInB,IAJmB,SACjCd,GAGY,EADTtC,GAAK,YAER,OACE,QAAC0C,EAAc,iBAAK1C,EAAK,CAAEqD,UAAQ,WAChCf,IAGP,C,mNCLMgB,GAAgBC,EAAAA,EAAAA,GAAkB,IAAIC,EAAAA,KAC7B,SAASC,EAAa,GAKf,IALe,MACnCC,EAAK,OACLC,EAAM,SACNpC,GAEkB,EADfvB,GAAK,YAER,MAAM4C,GAAQgB,EAAAA,EAAAA,KACRC,IAAMC,EAAAA,EAAAA,GAAclB,EAAMmB,YAAYC,GAAG,OAC/C,OACE,QAAC,IAAsB,eAACC,WAAS,EAACP,MAAOA,GAAW1D,EAAK,UACtDwD,EAAAA,GAAc7C,KAAKuD,IAClB,QAAC,IAAY,CAEXR,MAAOQ,EACPhC,GAAI,CACFiC,EAAGN,EAAK,OAAIvC,EACZ8C,SAAUP,EAAK,EAAI,MACnBQ,QAAS,OACTC,IAAKT,EAAK,EAAI,GAEhBU,QAAS,IAAMhD,EAAS+B,EAAcI,EAAOQ,IAAO,UAEpD,QAAC,IAAG,CAACG,QAAQ,OAAM,WACjB,2BAASH,KACT,QAAC,IAAe,KAChB,QAAC,IAAI,CAACnE,MAAO4D,EAAOO,GAAO7C,KAAK,cAb7B6C,OAmBf,C,2TCAe,SAASM,GAAqB,KAC3CC,EAAI,UACJC,EAAY,EAAC,OACbC,EAAM,SACNC,EAAQ,OACRC,EAAS,MAAM,GAAI,iBACnBC,IAEA,MAAM,EAAE7E,IAAMC,EAAAA,EAAAA,IAAe,CAAC,cAAe,qBACtC6E,EAAcC,IAAmBC,EAAAA,EAAAA,UACtCH,EAAmB,CAACA,GAAoB,IAAII,EAAAA,MAGxC,SAAEC,IAAaC,EAAAA,EAAAA,YAAWC,EAAAA,IACzBC,EAAOC,IAAYN,EAAAA,EAAAA,UAASE,EAASK,cAAcC,QAC1DC,EAAAA,EAAAA,YACE,IAAMP,EAASK,cAAcG,QAAO,CAACC,EAAGC,IAAWN,EAASM,MAC5D,CAACV,KAGHO,EAAAA,EAAAA,YACE,IAAMZ,GAAoBE,EAAgB,CAACF,KAC3C,CAACA,IAGH,MAAOgB,EAAYC,IAAiBd,EAAAA,EAAAA,UAAS,IACvCe,GAAqBC,EAAAA,EAAAA,kBAAiBH,IAEtC,OAAErF,GAAW6E,EACbY,GAAe9F,EAAAA,EAAAA,UACnB,IACE+F,EAAAA,GACGtB,QAAQuB,GAASvB,GAAOwB,EAAAA,EAAAA,IAAeD,MACvCvB,QAAQuB,GACPrB,EAAauB,UAASD,EAAAA,EAAAA,IAAeD,GAAMG,cAE5C1B,QACEuB,IACEJ,GACD/F,EAAG,mBAAkBmG,KAClBI,cACAF,SAASN,EAAmBQ,iBAElC3B,QAAQuB,GAAS3F,EAAO6F,UAASD,EAAAA,EAAAA,IAAeD,GAAM3F,UACtDM,MAAK,CAAC0F,EAAGC,KAAML,EAAAA,EAAAA,IAAeK,GAAGjG,QAAS4F,EAAAA,EAAAA,IAAeI,GAAGhG,UACjE,CAACuF,EAAoBnB,EAAQpE,EAAQR,EAAG8E,IAGpC4B,GAAevG,EAAAA,EAAAA,UACnB,KACEwG,EAAAA,EAAAA,GAAS1B,EAAAA,IAAoB2B,GAC3BV,EAAAA,GAAcW,SAASC,IACrB,MAAMC,GAAMX,EAAAA,EAAAA,IAAeU,GAAIR,WAC/BM,EAAGG,GAAKC,QACJf,EAAaI,SAASS,IAAKF,EAAGG,GAAKE,SAAS,OAGtD,CAAChB,IAGGiB,GAAqB/G,EAAAA,EAAAA,UACzB,KACEwG,EAAAA,EAAAA,GAASpD,EAAAA,IAAgBqD,GACvBV,EAAAA,GAAcW,SAASC,IACrB,MAAMK,GAAKf,EAAAA,EAAAA,IAAeU,GAAItG,OAC9BoG,EAAGO,GAAIH,QACHf,EAAaI,SAASS,IAAKF,EAAGO,GAAIF,SAAS,OAGrD,CAAChB,IAGH,OACE,QAAC,IAAY,CAACmB,KAAM5C,EAAM6C,QAAS3C,EAAO,UACxC,QAAC,IAAQ,YACP,QAAC,IAAW,CAACzC,GAAI,CAAEqF,GAAI,GAAI,UACzB,QAAC,KAAI,CAACC,WAAS,EAACC,QAAS,EAAE,WACzB,QAAC,KAAI,CAACC,MAAI,YACR,QAAC,IAAY,CACXhE,MAAOqB,EACPpB,OAAQgD,EACRpF,SAAUyD,EACV3B,WAAYyB,EACZzD,KAAK,aAGT,QAAC,KAAI,CAACqG,MAAI,YACR,QAAC,IAAY,CACXxF,GAAI,CAAEO,OAAQ,QACdlB,SAAWd,GAAW0E,EAASK,cAAc5E,IAAI,CAAEH,WACnDiD,MAAOjD,EACPkD,OAAQwD,EACR9F,KAAK,aAGT,QAAC,KAAI,CAACqG,MAAI,EAACC,SAAU,EAAE,UACrB,QAAC,IAAS,CACRC,WAAS,EACTvG,KAAK,QACLqC,MAAOoC,EACPvE,SAAWsG,GACT9B,EAAc8B,EAAEC,OAAOpE,OAEzB3D,MAAOE,EAAE,cACTiC,GAAI,CAAEO,OAAQ,QACdsF,WAAY,CACV7F,GAAI,CAAEO,OAAQ,cAIpB,QAAC,KAAI,CAACiF,MAAI,YACR,QAAC,IAAW,CAACnD,QAASI,YAI5B,QAAC,IAAO,KACR,QAAC,IAAW,WACV,QAAC,KAAI,CAAC6C,WAAS,EAACC,QAAS,EAAE,SACxBvB,EAAavF,KAAKqH,IAAc,MAC/B,MAAMC,GAAc5B,EAAAA,EAAAA,IAAe2B,GACnC,OACE,QAAC,KAAI,CAACN,MAAI,EAAiBQ,GAAI,EAAGC,GAAI,EAAE,UACtC,QAAC,IAAS,CAACjG,GAAI,CAAEO,OAAQ,QAAS,UAChC,QAAC,IAAc,CACb8B,QAAS,KACPI,IACAC,EAASoD,EAAU,EAErB9F,GAAI,CAAEmC,QAAS,QAAS,WAExB,QAAC,IAAG,CACFrC,UAAU,MACVb,KAAKiH,EAAAA,EAAAA,IAAYJ,EAAWtD,GAAa,GACzCxC,GAAI,CAAEM,MAAO,IAAKC,OAAQ,QAC1B4F,UAAY,SAAQJ,EAAYxH,gBAElC,QAAC,IAAG,CAACyB,GAAI,CAAEyF,SAAU,EAAGW,GAAI,GAAI,WAC9B,QAAC,IAAU,CAACC,QAAQ,YAAW,SAC5BN,EAAYO,QAEf,QAAC,IAAU,CACTtG,GAAI,CAAEmC,QAAS,OAAQoE,WAAY,YAAa,WAEhD,QAAC,IAAO,CACNpH,KAAM,IACNF,IACuB,OADpB,EACDuH,EAAAA,GAAUC,kBAAW,EAArB,EAAwBV,EAAY1B,eAGxC,QAAC,IAAY,CAACnE,MAAO6F,EAAYxH,OAAQmI,SAAO,gBA5B1CZ,EAiCT,SAKf,QAAC,IAAO,KACR,QAAC,IAAW,CAAC9F,GAAI,CAAEqF,GAAI,GAAI,UACzB,QAAC,IAAW,CAACsB,OAAK,EAACtE,QAASI,UAKtC,C,giBC3IMmE,EAAWzI,OAAO0I,KAAKC,EAAAA,IACd,SAASC,GAAwB,KAC9CxE,EAAI,OACJE,EAAM,SACNC,EAAQ,OACRC,EAAS,MAAM,GAAI,SACnBqE,GAAW,IAEX,MAAM,EAAEjJ,IAAMC,EAAAA,EAAAA,IAAe,CAC3B,iBAEA,wBACA,mBAEI,MAAEiJ,IAAU/D,EAAAA,EAAAA,YAAWgE,EAAAA,IACvB,SAAEjE,IAAaC,EAAAA,EAAAA,YAAWC,EAAAA,IACzBC,EAAOC,IAAYN,EAAAA,EAAAA,WAAS,IAAME,EAASkE,iBAAiB5D,SACnEC,EAAAA,EAAAA,YACE,IAAMP,EAASkE,iBAAiB1D,QAAO,CAACC,EAAG0D,IAAM/D,EAAS+D,MAC1D,CAACnE,EAAUI,IAGb,MAAM,OAAEgE,IAAWC,EAAAA,EAAAA,MAEZC,EAASC,IAAeC,EAAAA,EAAAA,OAG/BjE,EAAAA,EAAAA,YACE,IAAMP,EAASyE,SAASC,WAAU,IAAMH,OACxC,CAACA,EAAavE,IAGhB,MAAOW,EAAYC,IAAiBd,EAAAA,EAAAA,UAAS,IACvCe,GAAqBC,EAAAA,EAAAA,kBAAiBH,GACtCgE,GAAgB7D,EAAAA,EAAAA,kBAAiBX,GACjCyE,GAAkB9D,EAAAA,EAAAA,kBAAiBwD,GACnCO,GAAmB5J,EAAAA,EAAAA,UAAQ,KAAM,MACrC,MAAM,QAAE6J,EAAO,WAAE1D,EAAU,SAAE2D,EAAQ,UAAEC,GAAcL,EAC/CM,EAAa,IACblB,EAAW,CAAC,OAAS,MACK,OAA9B,EAAIF,EAAAA,GAAiBkB,IAAS,EAAI,IAEpC,OACEH,GACAM,EAAAA,GACGxF,QAAQhE,GACPgE,EAAOM,EAASmF,MAAM7E,IAAI5E,IAAM0J,EAAAA,EAAAA,GAAa1J,EAAK0I,MAEnD1E,QACC2F,EAAAA,EAAAA,IACE,CAAEP,UAAS1D,aAAYiC,KAAMxC,IAC7ByE,EAAAA,EAAAA,IAAuBtF,EAAUgE,KAGpCpI,MACC2J,EAAAA,EAAAA,IACEN,EACAD,GACAQ,EAAAA,EAAAA,IAAqBxF,EAAUgE,GAC/B,CAAC,MAAO,aAEX,GAEJ,CACDW,EACAZ,EACAa,EACA/D,EACAb,EACAgE,EACAtE,EACA0E,IAGI5C,GAAevG,EAAAA,EAAAA,UACnB,KACEwG,EAAAA,EAAAA,GAAS1B,EAAAA,IAAoB2B,GAC3BwD,EAAAA,GAAiBvD,SAAS8D,IACxB,MAAM5D,GAAMuD,EAAAA,EAAAA,GAAaK,EAAIzF,EAASoE,QAAQsB,cAC9ChE,EAAGG,GAAKC,QACJ+C,EAAiB1D,SAASsE,IAAK/D,EAAGG,GAAKE,SAAS,OAG1D,CAAC8C,EAAkB7E,IAGf2F,GAAgB1K,EAAAA,EAAAA,UACpB,KACEwG,EAAAA,EAAAA,GAASmE,EAAAA,IAAiBlE,GACxBwD,EAAAA,GAAiBvD,SAAS8D,IACxB,MAAMI,GAAMT,EAAAA,EAAAA,GAAaK,EAAIzF,EAASoE,QAAQ0B,WAC9CpE,EAAGmE,GAAK/D,QACJ+C,EAAiB1D,SAASsE,IAAK/D,EAAGmE,GAAK9D,SAAS,OAG1D,CAAC8C,EAAkB7E,KAGf,WAAEoB,EAAU,QAAE0D,EAAO,SAAEC,EAAQ,UAAEC,GAAc7E,EAErD,OACE,QAAC,IAAY,CACX+B,KAAM5C,EACN6C,QAAS3C,EACTzC,GAAI,CAAE,uBAAwB,CAAEgJ,eAAgB,WAAa,UAE7D,QAAC,IAAQ,YACP,QAAC,IAAW,CACVhJ,GAAI,CACFqF,GAAI,EACJlD,QAAS,OACToE,WAAY,SACZnE,IAAK,EACL6G,SAAU,QACV,WAEF,QAAC,IAAY,CACXjJ,GAAI,CAAEO,OAAQ,QACdlB,SAAWgF,GACTpB,EAASkE,iBAAiBzI,IAAI,CAAE2F,eAElC7C,MAAO6C,EACP5C,OAAQgD,EACRtF,KAAK,WAEP,QAAC,IAAa,CACZa,GAAI,CAAEO,OAAQ,QACdlB,SAAW0I,GAAY9E,EAASkE,iBAAiBzI,IAAI,CAAEqJ,YACvDvG,MAAOuG,EACPtG,OAAQmH,EACRzJ,KAAK,WAEP,QAAC,IAAG,CAACsG,SAAU,EAAE,UACf,QAAC,IAAS,CACRC,WAAS,EACTlE,MAAOoC,EACPvE,SAAWsG,GACT9B,EAAc8B,EAAEC,OAAOpE,OAEzB3D,MAAOE,EAAE,iBACToB,KAAK,QACLa,GAAI,CAAEO,OAAQ,QACdsF,WAAY,CACV7F,GAAI,CAAEO,OAAQ,cAIpB,QAAC,IAAY,CACXP,GAAI,CAAEO,OAAQ,QACdqG,SAAUA,EACVpF,MAAOwG,EACP3I,SAAW2I,GAAa/E,EAASkE,iBAAiBzI,IAAI,CAAEsJ,aACxDC,UAAWA,EACXiB,YAAcjB,GACZhF,EAASkE,iBAAiBzI,IAAI,CAAEuJ,iBAGpC,QAAC,IAAW,CAAC5F,QAASI,QAExB,QAAC,IAAO,KACR,QAAC,IAAY0G,SAAQ,CAAC3H,MAAO,CAAE4H,cAAUhK,GAAmB,UAC1D,QAAC,IAAW,WACV,QAAC,KAAI,CACHkG,WAAS,EACTC,QAAS,EACT8D,QAAS,CAAE1H,GAAI,EAAG2H,GAAI,EAAGrD,GAAI,EAAGD,GAAI,GAAI,SAEvC8B,EAAiBrJ,KAAK8K,IACrB,QAAC,KAAI,CAAC/D,MAAI,EAAoB7D,GAAI,EAAE,UAClC,QAAC6H,EAAa,CACZD,aAAcA,EACdlH,QAAS,KACPI,IACQ,MAARC,GAAAA,EAAW6G,EAAa,KALdA,eAgBhC,CAEA,MAAME,GAAgBpJ,EAAAA,EAAAA,KAAO,QAAC,UAAE8F,GAAmC,EAArBrI,GAAK,mBACjD,QAAC,IAAO,iBAAKA,EAAK,CAAE4L,QAAS,CAAEC,OAAQxD,KAAe,GADlC9F,CAEnB,CACD,CAAE,MAAKuJ,EAAAA,EAAeC,WAAY,CAChCC,QAAS,KAIb,SAASN,GAAc,aACrBD,EAAY,QACZlH,IAIC,MACD,MAAM,OAAEgF,IAAWC,EAAAA,EAAAA,KACbyC,GAAiB1B,EAAAA,EAAAA,GAAakB,EAAclC,GAC5C2C,GAAYC,EAAAA,EAAAA,GAAaV,IACzB,SAAEW,IAAaC,EAAAA,EAAAA,GAAYZ,IAC3B,SAAEtG,IAAaC,EAAAA,EAAAA,YAAWC,EAAAA,IAC1B,MAAE8D,IAAU/D,EAAAA,EAAAA,YAAWgE,EAAAA,IAEtB/B,EAAMiF,EAAQhF,IAAWiF,EAAAA,EAAAA,OAE1B,MAAEC,EAAQ,EAAC,UAAE9H,EAAY,EAAC,cAAE+H,EAAgB,GAAe,MAATP,EAAAA,EAAa,CAAC,EACtE,OACE,QAACP,EAAa,CACZe,WAAY,IACZC,eAAgB,IAChBC,OAAK,EACLC,UAAU,SACVxF,KAAMA,EACNC,QAASA,EACTgF,OAAQA,EACRQ,OACE,QAAC,IAAG,CAAC5K,GAAI,CAAEM,MAAO,KAAM,UACtB,QAAC,IAAa,CAACuK,WAAS,EAACtB,aAAcA,MAE1C,UAED,QAAC,IAAG,WACF,QAAC,IAAS,CACRvJ,GAAI,CAAEyF,SAAU,EAAGtD,QAAS,OAAQ2I,cAAe,UAAW,WAE9D,QAAC,IAAG,CAAC9K,GAAI,CAAE+K,SAAU,WAAYC,QAAS,GAAKC,OAAQ,GAAI,UACzD,QAAC,IAAU,CACTjL,GAAI,CAAEiC,EAAG,KACTI,QAAU6I,IACR9F,IACAnC,EAASyE,SAAShJ,IAAI6K,EAAc,CAAEW,UAAWA,GAAW,EAC5D,SAEDA,GAAW,QAAC,IAAQ,KAAM,QAAC,IAAc,SAG9C,QAAC,IAAc,CAAC7H,QAASA,EAAQ,UAC/B,QAAC,IAAG,CACFF,QAAQ,OACR4I,SAAS,WACT5E,UAAY,QAAqB,MAAd4D,OAAc,EAAdA,EAAgBxL,aACnCyB,GAAI,CACF,YAAa,CACXmL,QAAS,KACThJ,QAAS,QACT4I,SAAU,WACVK,KAAM,EACNnL,IAAK,EACLK,MAAO,OACPC,OAAQ,OACRyK,QAAS,GACTK,gBAAkB,QAAMC,EAAAA,EAAAA,IACtB/B,EACA,SACAlC,MAEFkE,mBAAoB,SACpBC,eAAgB,UAGpBlL,MAAM,OAAM,WAEZ,QAAC,IAAG,CACFmL,WAAY,EACZzL,GAAI,CAAE0L,SAAU,CAAE/J,GAAI,MAAOqE,GAAI,QACjC2F,UAAU,WACVxJ,QAAQ,OACR2I,cAAc,SACdG,OAAQ,EAAE,UAEV,QAAC,IAAG,CACFnL,UAAU,MACVb,KAAK2M,EAAAA,EAAAA,GAAUrC,EAAclC,EAAQJ,GACrC3G,MAAM,OACNC,OAAO,OACPmL,SAAU,IACV1L,GAAI,CAAE6L,GAAI,aAGd,QAAC,IAAG,CACFpG,SAAU,EACVzF,GAAI,CAAE8L,GAAI,EAAGC,GAAI,GACjB5J,QAAQ,OACR2I,cAAc,SACdG,OAAQ,EACRjC,eAAe,eAAc,WAE7B,QAAC,IAAU,CAAC3C,QAAQ,QAAQrG,GAAI,CAAEyF,SAAU,GAAI,UAC9C,QAAC,IAAO,CACN1E,MAAqB,MAAdgJ,OAAc,EAAdA,EAAgBhB,WACvB/I,GAAI,CAAEgL,QAAS,IAAMgB,WAAY,gBAAiB,SAEnC,MAAdjC,OAAc,EAAdA,EAAgBzD,SAGpB0D,GACC,QAAC,IAAG,CAAChK,GAAI,CAAEmC,QAAS,OAAQC,IAAK,EAAGmE,WAAY,UAAW,WACzD,QAAC,IAAG,CAACvG,GAAI,CAAEgM,WAAY,gBAAiB,WACtC,QAAC,IAAU,CACT3F,QAAQ,QACRvG,UAAU,OACVmM,WAAW,SAAQ,UACpB,OACM3B,MAEP,QAAC,IAAU,CACTjE,QAAQ,QACRvG,UAAU,OACViB,MAAM,iBAAgB,UACvB,IACGmL,EAAAA,GAAkB1J,UAGxB,QAAC,IAAU,CAAC6D,QAAQ,QAAO,UAAC,IAAEkE,SAGhC,QAAC,IAAU,CAACzK,UAAU,OAAOuG,QAAQ,QAAO,UAC1C,QAAC,IAAO,UAAC,WAGb,QAAC,IAAY,CAACnG,MAA6B,OAAxB,EAAgB,MAAd6J,OAAc,EAAdA,EAAgBxL,QAAM,EAAI,EAAGmI,SAAO,kBAQzE,C,+NCtYO,MAAMyF,EAAgB,EAAIC,EAAAA,GAElB,SAASC,IACtB,MAAM,SAAEpJ,IAAaC,EAAAA,EAAAA,YAAWC,EAAAA,KACzB,MAAEmJ,EAAK,UAAEC,GAAalJ,IAAYN,EAAAA,EAAAA,WAAS,IAChDE,EAASuJ,YAAYjJ,SAEvBC,EAAAA,EAAAA,YACE,IAAMP,EAASuJ,YAAY/I,QAAO,CAACC,EAAG0D,IAAM/D,EAAS+D,MACrD,CAACnE,IAEH,MAAMwJ,GAAiBC,EAAAA,EAAAA,aAAOtN,GAExBuN,EAAYC,IACZA,GAAYC,EAAAA,IACdJ,EAAezH,SAAW8H,aAAaL,EAAezH,SACtDyH,EAAezH,aAAU5F,GAEzBqN,EAAezH,QAAU+H,YACvB,IAAMC,QAAQC,IAAI,YAAaL,EAAW,IAC1CT,GAEJlJ,EAASuJ,YAAY9N,IAAI,CACvB4N,MAAOM,EACPL,WAAW,IAAIW,MAAOC,WACtB,GAGJ3J,EAAAA,EAAAA,YAAU,KACR,GAAI8I,EAAQO,EAAAA,GAAW,CACrB,MAAMO,EAAMF,KAAKE,MACXC,EAAaR,EAAAA,GAAYP,EACzBgB,EAAqBC,KAAKC,IAC9BD,KAAKE,OAAOL,EAAMb,GAAaJ,GAC/BkB,GAEIK,EAAepB,EAAQgB,EACvBK,EAAUpB,EAAYe,EAAqBnB,EACjDlJ,EAASuJ,YAAY9N,IAAI,CAAE4N,MAAOoB,EAAcnB,UAAWoB,IACvDD,EAAeb,EAAAA,KACjBJ,EAAezH,QAAU+H,YACvB,IAAMJ,EAASe,EAAe,IAC9BN,EAAMO,GAEZ,CACA,MAAO,IAAMlB,EAAezH,SAAW8H,aAAaL,EAAezH,QAAQ,GAE1E,IAEH,MAAM4I,EACJtB,GAASO,EAAAA,GAAYN,EAAYA,EAAYJ,EAEzC0B,EACJvB,GAASO,EAAAA,GACLN,EACAA,GAAaM,EAAAA,GAAYP,GAASH,EAClC2B,EAAgB,IAAIZ,KAAKW,GAEzBE,GAAkBC,EAAAA,EAAAA,IAAWT,KAAKU,IAAIL,EAAmBV,KAAKE,QAEpE,OACE,QAAC,IAAQ,YACP,QAAC,KAAI,CAAC9H,WAAS,EAACtF,GAAI,CAAEoG,GAAI,EAAGf,GAAI,GAAKE,QAAS,EAAE,WAC/C,QAAC,KAAI,CAACC,MAAI,YACR,QAAC,IAAO,CAACvG,IAAKuH,EAAAA,GAAU8F,MAAM4B,QAAS/O,KAAM,OAE/C,QAAC,KAAI,CAACqG,MAAI,YACR,QAAC,IAAU,CAACa,QAAQ,KAAI,SAAC,wBAG7B,QAAC,IAAO,KACR,QAAC,IAAW,WACV,QAAC,KAAI,CAACf,WAAS,EAACC,QAAS,EAAE,WACzB,QAAC,KAAI,CAACC,MAAI,YACR,QAAC,IAAU,CAACa,QAAQ,KAAI,WACtB,QAAC,IAAO,CAACpH,IAAKuH,EAAAA,GAAU8F,MAAM4B,WAC9B,QAAC,KAAS,CACRC,KAAK,SACLnO,GAAI,CAAEM,MAAO,MAAO8N,SAAU,QAC9B5M,MAAO8K,EACP+B,WAAY,CAAEb,IAAK,EAAGc,IAAK,IAAKtO,GAAI,CAAEuO,UAAW,UACjDlP,SAAWsG,GAAMgH,EAAS6B,SAAS7I,EAAEC,OAAOpE,WAE9C,0BAAM,IAAEqL,EAAAA,YAGZ,QAAC,KAAI,CAACrH,MAAI,EAACC,SAAU,EAAE,WACrB,QAAC,IAAW,CAACgJ,WAAS,aACpB,QAAC,IAAM,CAACpM,QAAS,IAAMsK,EAAS,GAAIxL,SAAoB,IAAVmL,EAAY,SAAC,OAG3D,QAAC,IAAM,CACLjK,QAAS,IAAMsK,EAASL,EAAQ,GAChCnL,SAAoB,IAAVmL,EAAY,SACvB,QAGD,QAAC,IAAM,CACLjK,QAAS,IAAMsK,EAASL,EAAQ,IAChCnL,SAAUmL,EAAQ,GAAG,SACtB,SAGD,QAAC,IAAM,CACLjK,QAAS,IAAMsK,EAASL,EAAQ,IAChCnL,SAAUmL,EAAQ,GAAG,SACtB,SAGD,QAAC,IAAM,CACLjK,QAAS,IAAMsK,EAASL,EAAQ,IAChCnL,SAAUmL,EAAQ,GAAG,SACtB,SAGD,QAAC,IAAM,CAACjK,QAAS,IAAMsK,EAASL,EAAQ,GAAG,SAAC,QAC5C,QAAC,IAAM,CAACjK,QAAS,IAAMsK,EAASL,EAAQ,IAAI,SAAC,SAC7C,QAAC,IAAM,CACLjK,QAAS,IAAMsK,EAASE,EAAAA,IACxB1L,SAAUmL,IAAUO,EAAAA,GAAU,UAC/B,OACMA,EAAAA,UAGT,QAAC,IAAU,CAACxG,QAAQ,YAAYrG,GAAI,CAAE6L,GAAI,GAAI,SAC3CS,EAAQO,EAAAA,IACP,0BAAM,iBACWkB,EAAgB,kBAAgB,IAC9CD,EAAcY,qBAAsB,IACpCZ,EAAca,yBAGjB,0BAAM,oCAC8BZ,EAAgB,UAAQ,IACzDD,EAAcY,qBAAsB,IACpCZ,EAAca,8BAKvB,QAAC,KAAI,CAACnJ,MAAI,EAAC7D,GAAI,GAAG,UAChB,QAAC,IAAU,CAAC0E,QAAQ,UAAS,SAAC,+JAU1C,C,4XChIe,SAASuI,GAAW,SACjCC,EAAQ,QACRxM,EAAO,OACPyM,EAAM,SACNC,EAAQ,SACRC,GAAW,EAAK,aAChBC,IAEA,MAAM,EAAElR,IAAMC,EAAAA,EAAAA,IAAe,CAAC,cAAe,QACvC,SAAEiF,IAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAE1B+L,GADiBC,EAAAA,EAAAA,GAAUN,GAE3B9I,EAAoB,MAANmJ,GAAAA,EAAQvQ,KAAMwF,EAAAA,EAAAA,IAAe+K,EAAOvQ,UAAOS,EAEzDuD,GAAS3D,EAAAA,EAAAA,cACZoQ,GAAuBA,EAAGzG,iBAA6B,MAAX5C,OAAW,EAAXA,EAAa1B,aAC1D,CAAC0B,IAGGsJ,GAAcrQ,EAAAA,EAAAA,cACjBoB,IACC,QAAC,IAAc,CAACiC,QAAS,IAAa,MAAPA,OAAO,EAAPA,EAAUwM,GAAU,SAChDzO,KAGL,CAACiC,EAASwM,IAENS,GAAmBtQ,EAAAA,EAAAA,cAAaoB,IAAa,QAAC,IAAG,UAAEA,KAAiB,IACpEmP,GAAcvQ,EAAAA,EAAAA,cACjBM,GACCuP,GAAY5L,EAASuM,QAAQ9Q,IAAImQ,EAAU,CAAEY,SAAUnQ,KACzD,CAAC2D,EAAU4L,IAGPa,GAASxR,EAAAA,EAAAA,UACb,IACE6H,GACAmJ,IACAS,EAAAA,EAAAA,IAAc,CAAC5J,EAAY6J,MAAMC,EAAAA,EAAAA,IAAiBX,MACpD,CAACnJ,EAAamJ,IAGhB,IAAKA,IAAWnJ,IAAgB2J,EAAQ,OAAO,KAC/C,MAAM,MAAEpF,EAAK,UAAE9H,EAAS,WAAEsN,EAAU,GAAEC,EAAE,SAAEN,EAAW,GAAE,KAAEO,GAASd,EAC5DvG,EAAgB+G,EAAOnM,IAAI0M,EAAAA,GAAMf,OAAOf,MAAM3M,MAC9C0O,EAAQ,CAACD,EAAAA,GAAMf,OAAOiB,KAAMF,EAAAA,GAAMf,OAAOkB,IAAKH,EAAAA,GAAMf,OAAOmB,MAAM5R,KACpE6R,GAAMZ,EAAOnM,IAAI+M,KAEdC,IAAMrK,EAAAA,EAAAA,IAAYgJ,EAAOvQ,IAAK6D,GAAa,GAEjD,OACE,QAAC,EAAAgO,SAAQ,CACPC,UACE,QAAC,IAAQ,CACPpK,QAAQ,cACRrG,GAAI,CAAEM,MAAO,OAAQC,OAAQ,OAAQmQ,UAAW,OAEnD,UAED,QAAC,IAAS,CACR1Q,GAAI,CACFO,OAAQ,OACR4B,QAAS,OACT2I,cAAe,SACf9B,eAAgB,iBAChB,WAEF,QAAC,IAAkB,CACjB2H,YAAatO,EACbuO,QAASvB,EACTwB,aAAcvB,EAAiB,WAE/B,QAAC,IAAG,CACFnJ,UAAY,QAAOJ,EAAYxH,aAC/ByB,GAAI,CAAE+K,SAAU,WAAYgB,GAAI,EAAG3F,GAAI,GAAI,WAEzC/D,IACA,QAAC,IAAU,CACTtB,MAAM,UACNsB,QAAS,IAAMY,EAASuM,QAAQ9Q,IAAIqR,EAAI,CAAEC,MAAOA,IACjDhQ,GAAI,CAAE+K,SAAU,WAAY+F,MAAO,EAAGC,OAAQ,EAAG9F,OAAQ,GAAI,SAE5D+E,GAAO,QAAC,IAAI,KAAM,QAAC,IAAQ,OAGhC,QAAC,IAAG,CAAChQ,GAAI,CAAE+K,SAAU,WAAYE,OAAQ,GAAI,WAC3C,QAAC,IAAG,CACFnL,UAAU,MACVE,GAAI,CAAEmC,QAAS,OAAQoE,WAAY,SAAUnE,IAAK,EAAG4O,GAAI,GAAI,WAE7D,QAAC,IAAO,CAAC7R,KAAM,EAAGF,IAAKuH,EAAAA,GAAUC,YAAYkC,MAC7C,QAAC,IAAU,CACTsI,QAAM,EACNjR,GAAI,CACFuO,UAAW,SACX5N,gBAAiB,yBACjBuQ,aAAc,MACd9K,GAAI,GACJ,UAEF,2BAASL,EAAYO,aAGzB,QAAC,IAAU,CAACxG,UAAU,OAAOuG,QAAQ,KAAI,UAAC,OACnCiE,MAEP,QAAC,IAAU,CAACxK,UAAU,OAAOuG,QAAQ,KAAKtF,MAAM,iBAAgB,UAAC,IAC7DmL,EAAAA,GAAkB1J,OAEtB,QAAC,IAAU,CAAC6D,QAAQ,KAAI,UAAC,eACZ,2BAASyJ,QAEtB,QAAC,IAAY,CAAC5P,MAAO6F,EAAYxH,OAAQmI,SAAO,QAElD,QAAC,IAAG,CACF1G,GAAI,CAAEO,OAAQ,OAAQwK,SAAU,WAAY+F,MAAO,EAAG7Q,IAAK,GAAI,UAE/D,QAAC,IAAG,CACFH,UAAU,MACVb,IAAQ,MAAHsR,GAAAA,GAAO,GACZjQ,MAAM,OACNC,OAAO,OACPP,GAAI,CAAEmR,MAAO,iBAInB,QAAC,IAAW,UACTjB,EAAMzR,KAAK2S,GACLA,EAAKC,KAAK/K,MAEb,QAAC,IAAG,CAAiCtG,GAAI,CAAEmC,QAAS,QAAS,WAC3D,QAAC,IAAU,CAACsD,SAAU,EAAE,UACrB2L,EAAKC,KAAKC,KAAK,IAAEF,EAAKC,KAAK/K,SAE9B,QAAC,IAAU,WAAEiL,EAAAA,EAAAA,GAASH,OAJdI,KAAKC,UAAUL,EAAKC,OAFJ,aAYlC,QAAC,IAAG,CACFrR,GAAI,CACFiC,EAAG,EACHE,QAAS,OACTC,IAAK,EACL4G,eAAgB,gBAChBzC,WAAY,UACZ,WAEF,QAAC,IAAG,CAACvG,GAAI,CAAEyF,SAAU,GAAI,SACtBuJ,GACC,QAAC,IAAoB,CACnBS,SAAUA,EACVF,YAAaA,EACb5M,OAAQA,EACR+O,kBAAmB,CAAEC,kBAAoB5T,IAAOA,EAAEY,QAGpD,QAAC,IAAY,CAAC8Q,SAAUA,OAG5B,QAAC,IAAG,CACFtN,QAAQ,OACRC,IAAK,EACLmE,WAAW,UACXhG,OAAO,OACPP,GAAI,CAAE,oBAAqB,CAAEkC,SAAU,EAAG3B,OAAQ,SAAW,YAE1DuO,IACD,QAAC,IAAO,CACNlE,OAAO,QAAC,IAAU,UAAE7M,EAAC,OAAC,uBACtB4M,UAAU,MACVD,OAAK,YAEL,QAAC,IAAM,CAAC3J,MAAM,OAAO5B,KAAK,QAAQkD,QAAS,IAAMyM,EAAOiB,GAAI,UAC1D,QAAC,IAAQ,UAIZhB,IACD,QAAC,IAAM,CACLhO,MAAM,QACN5B,KAAK,QACLkD,QAAS,IAAM0M,EAASgB,GACxB5O,WAAYsO,GAAYO,EAAK,UAE7B,QAAC,IAAiB,MAGrBf,YAMb,C,mCCzOI2C,EAAyB,EAAQ,OAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBF,EAAuB,EAAQ,QAChDG,EAAc,EAAQ,OACtBC,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,uIACD,YACJN,EAAQ,EAAUG,C,mCCVdJ,EAAyB,EAAQ,OAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBF,EAAuB,EAAQ,QAChDG,EAAc,EAAQ,OACtBC,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,+FACD,wBACJN,EAAQ,EAAUG,C,0ECVlB,SAAe,QAA4B,SAAK,OAAQ,CACtDG,EAAG,mDACD,e,0ECFJ,SAAe,QAA4B,SAAK,OAAQ,CACtDA,EAAG,wNACD,a,0ECFJ,SAAe,QAA4B,SAAK,OAAQ,CACtDA,EAAG,0GACD,S,mFCDJ,SAAe,QAA4B,SAAK,OAAQ,CACtDA,EAAG,8aACD,U,+BCIJ,IAAIC,EAAuB,EAAQ,OAEnC,SAASC,IAAiB,CAC1B,SAASC,IAA0B,CACnCA,EAAuBC,kBAAoBF,EAE3CG,EAAOX,QAAU,WACf,SAASY,EAAK3U,EAAO4U,EAAUC,EAAelD,EAAUmD,EAAcC,GACpE,GAAIA,IAAWT,EAAf,CAIA,IAAIU,EAAM,IAAIC,MACZ,mLAKF,MADAD,EAAIxM,KAAO,sBACLwM,CAPN,CAQF,CAEA,SAASE,IACP,OAAOP,CACT,CAHAA,EAAKQ,WAAaR,EAMlB,IAAIS,EAAiB,CACnBC,MAAOV,EACPW,OAAQX,EACRY,KAAMZ,EACNa,KAAMb,EACNc,OAAQd,EACRe,OAAQf,EACRgB,OAAQhB,EACRiB,OAAQjB,EAERkB,IAAKlB,EACLmB,QAASZ,EACTjL,QAAS0K,EACToB,YAAapB,EACbqB,WAAYd,EACZ5B,KAAMqB,EACNsB,SAAUf,EACVgB,MAAOhB,EACPiB,UAAWjB,EACXkB,MAAOlB,EACPmB,MAAOnB,EAEPoB,eAAgB9B,EAChBC,kBAAmBF,GAKrB,OAFAa,EAAemB,UAAYnB,EAEpBA,CACT,C,kBC/CEV,EAAOX,QAAU,EAAQ,MAAR,E,yBCNnBW,EAAOX,QAFoB,8C","sources":["webpack:///./src/app/Components/Artifact/ArtifactSetAutocomplete.tsx","webpack:///./src/app/Components/Image/ImgFullwidth.tsx","webpack:///./src/app/Components/TextButton.tsx","webpack:///./src/app/Components/ToggleButton/RarityToggle.tsx","webpack:///./src/app/Components/Weapon/WeaponSelectionModal.tsx","webpack:///./src/app/PageCharacter/CharacterSelectionModal.tsx","webpack:///./src/app/PageTools/ResinCounter.tsx","webpack:///./src/app/PageWeapon/WeaponCard.tsx","webpack:///../../node_modules/@mui/icons-material/CheckBox.js","webpack:///../../node_modules/@mui/icons-material/CheckBoxOutlineBlank.js","webpack:///../../node_modules/@mui/icons-material/esm/ChevronRight.js","webpack:///../../node_modules/@mui/icons-material/esm/InsertLink.js","webpack:///../../node_modules/@mui/icons-material/esm/Replay.js","webpack:///../../node_modules/@mui/icons-material/esm/YouTube.js","webpack:///../../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../../node_modules/prop-types/index.js","webpack:///../../node_modules/prop-types/lib/ReactPropTypesSecret.js"],"sourcesContent":["import type { ArtifactRarity, ArtifactSetKey } from '@genshin-optimizer/consts'\nimport type { AutocompleteRenderGroupParams } from '@mui/material'\nimport { Box, List, ListSubheader } from '@mui/material'\nimport { useCallback, useMemo } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { setKeysByRarities } from '../../Data/Artifacts'\nimport { artifactDefIcon } from '../../Data/Artifacts/ArtifactSheet'\nimport type { GeneralAutocompleteProps } from '../GeneralAutocomplete'\nimport { GeneralAutocomplete } from '../GeneralAutocomplete'\nimport ImgIcon from '../Image/ImgIcon'\nimport { StarsDisplay } from '../StarDisplay'\nimport sortByRarityAndName from './sortByRarityAndName'\n\nexport default function ArtifactSetAutocomplete({\n  artSetKey,\n  setArtSetKey,\n  label = '',\n  ...props\n}: {\n  artSetKey: ArtifactSetKey | ''\n  setArtSetKey: (key: ArtifactSetKey | '') => void\n} & Omit<\n  GeneralAutocompleteProps<ArtifactSetKey | ''>,\n  'options' | 'valueKey' | 'onChange' | 'toImg' | 'groupBy' | 'renderGroup'\n>) {\n  const { t } = useTranslation(['artifact', 'artifactNames_gen'])\n  label = label ? label : t('artifact:autocompleteLabels.set')\n\n  const options = useMemo(\n    () =>\n      Object.entries(setKeysByRarities)\n        .flatMap(([rarity, sets]) =>\n          sets.map((set) => ({\n            key: set,\n            label: t(`artifactNames_gen:${set}`),\n            grouper: +rarity as ArtifactRarity,\n          }))\n        )\n        .sort(sortByRarityAndName),\n    [t]\n  )\n\n  const toImg = useCallback(\n    (key: ArtifactSetKey | '') =>\n      key ? <ImgIcon src={artifactDefIcon(key)} size={2} /> : undefined,\n    []\n  )\n  const onChange = useCallback(\n    (k: ArtifactSetKey | '' | null) => setArtSetKey(k ?? ''),\n    [setArtSetKey]\n  )\n  return (\n    <GeneralAutocomplete\n      options={options}\n      valueKey={artSetKey}\n      onChange={onChange}\n      toImg={toImg}\n      label={label}\n      groupBy={(option) => option.grouper?.toString() ?? ''}\n      renderGroup={(params: AutocompleteRenderGroupParams) =>\n        params.group && (\n          <List key={params.group} component={Box}>\n            <ListSubheader key={`${params.group}Header`} sx={{ top: '-1em' }}>\n              {params.group}{' '}\n              <StarsDisplay stars={+params.group as ArtifactRarity} inline />\n            </ListSubheader>\n            {params.children}\n          </List>\n        )\n      }\n      {...props}\n    />\n  )\n}\n","import { styled } from '@mui/material'\nconst ImgFullwidth = styled('img')({\n  width: '100%',\n  height: 'auto',\n})\n\nexport default ImgFullwidth\n","import type { ButtonProps } from '@mui/material'\nimport { Button, styled } from '@mui/material'\n\nconst DisabledButton = styled(Button)(({ theme }) => ({\n  '&.Mui-disabled': {\n    backgroundColor: theme.palette.primary.dark,\n    color: theme.palette.text.secondary,\n  },\n}))\n\nexport default function TextButton({\n  children,\n  disabled,\n  ...props\n}: ButtonProps) {\n  return (\n    <DisabledButton {...props} disabled>\n      {children}\n    </DisabledButton>\n  )\n}\n","import type { RarityKey } from '@genshin-optimizer/consts'\nimport { allRarityKeys } from '@genshin-optimizer/consts'\nimport StarRoundedIcon from '@mui/icons-material/StarRounded'\nimport { Box, Chip, ToggleButton, useMediaQuery, useTheme } from '@mui/material'\nimport { handleMultiSelect } from '../../Util/MultiSelect'\nimport type { SolidToggleButtonGroupProps } from '../SolidToggleButtonGroup'\nimport SolidToggleButtonGroup from '../SolidToggleButtonGroup'\ntype RarityToggleProps = Omit<\n  SolidToggleButtonGroupProps,\n  'onChange' | 'value'\n> & {\n  onChange: (value: RarityKey[]) => void\n  value: RarityKey[]\n  totals: Record<RarityKey, Displayable>\n}\nconst rarityHandler = handleMultiSelect([...allRarityKeys])\nexport default function RarityToggle({\n  value,\n  totals,\n  onChange,\n  ...props\n}: RarityToggleProps) {\n  const theme = useTheme()\n  const xs = !useMediaQuery(theme.breakpoints.up('sm'))\n  return (\n    <SolidToggleButtonGroup exclusive value={value} {...props}>\n      {allRarityKeys.map((star) => (\n        <ToggleButton\n          key={star}\n          value={star}\n          sx={{\n            p: xs ? 1 : undefined,\n            minWidth: xs ? 0 : '7em',\n            display: 'flex',\n            gap: xs ? 0 : 1,\n          }}\n          onClick={() => onChange(rarityHandler(value, star))}\n        >\n          <Box display=\"flex\">\n            <strong>{star}</strong>\n            <StarRoundedIcon />\n            <Chip label={totals[star]} size=\"small\" />\n          </Box>\n        </ToggleButton>\n      ))}\n    </SolidToggleButtonGroup>\n  )\n}\n","import type { WeaponKey, WeaponTypeKey } from '@genshin-optimizer/consts'\nimport {\n  allRarityKeys,\n  allWeaponKeys,\n  allWeaponTypeKeys,\n} from '@genshin-optimizer/consts'\nimport { imgAssets, weaponAsset } from '@genshin-optimizer/gi-assets'\nimport {\n  Box,\n  CardActionArea,\n  CardContent,\n  Divider,\n  Grid,\n  TextField,\n  Typography,\n} from '@mui/material'\nimport type { ChangeEvent } from 'react'\nimport {\n  useContext,\n  useDeferredValue,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { getWeaponSheet } from '../../Data/Weapons'\nimport type WeaponSheet from '../../Data/Weapons/WeaponSheet'\nimport { DatabaseContext } from '../../Database/Database'\nimport { catTotal } from '../../Util/totalUtils'\nimport CardDark from '../Card/CardDark'\nimport CardLight from '../Card/CardLight'\nimport CloseButton from '../CloseButton'\nimport ImgIcon from '../Image/ImgIcon'\nimport ModalWrapper from '../ModalWrapper'\nimport { StarsDisplay } from '../StarDisplay'\nimport RarityToggle from '../ToggleButton/RarityToggle'\nimport WeaponToggle from '../ToggleButton/WeaponToggle'\n\ntype WeaponSelectionModalProps = {\n  show: boolean\n  ascension?: number\n  onHide: () => void\n  onSelect: (wKey: WeaponKey) => void\n  filter?: (sheet: WeaponSheet) => boolean\n  weaponTypeFilter?: WeaponTypeKey\n}\n\nexport default function WeaponSelectionModal({\n  show,\n  ascension = 0,\n  onHide,\n  onSelect,\n  filter = () => true,\n  weaponTypeFilter,\n}: WeaponSelectionModalProps) {\n  const { t } = useTranslation(['page_weapon', 'weaponNames_gen'])\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(\n    weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys]\n  )\n\n  const { database } = useContext(DatabaseContext)\n  const [state, setState] = useState(database.displayWeapon.get())\n  useEffect(\n    () => database.displayWeapon.follow((r, dbMeta) => setState(dbMeta)),\n    [database]\n  )\n\n  useEffect(\n    () => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]),\n    [weaponTypeFilter]\n  )\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const deferredSearchTerm = useDeferredValue(searchTerm)\n\n  const { rarity } = state\n  const weaponIdList = useMemo(\n    () =>\n      allWeaponKeys\n        .filter((wKey) => filter(getWeaponSheet(wKey)))\n        .filter((wKey) =>\n          weaponFilter.includes(getWeaponSheet(wKey).weaponType)\n        )\n        .filter(\n          (wKey) =>\n            !deferredSearchTerm ||\n            t(`weaponNames_gen:${wKey}`)\n              .toLowerCase()\n              .includes(deferredSearchTerm.toLowerCase())\n        )\n        .filter((wKey) => rarity.includes(getWeaponSheet(wKey).rarity))\n        .sort((a, b) => getWeaponSheet(b).rarity - getWeaponSheet(a).rarity),\n    [deferredSearchTerm, filter, rarity, t, weaponFilter]\n  )\n\n  const weaponTotals = useMemo(\n    () =>\n      catTotal(allWeaponTypeKeys, (ct) =>\n        allWeaponKeys.forEach((wk) => {\n          const wtk = getWeaponSheet(wk).weaponType\n          ct[wtk].total++\n          if (weaponIdList.includes(wk)) ct[wtk].current++\n        })\n      ),\n    [weaponIdList]\n  )\n\n  const weaponRarityTotals = useMemo(\n    () =>\n      catTotal(allRarityKeys, (ct) =>\n        allWeaponKeys.forEach((wk) => {\n          const wr = getWeaponSheet(wk).rarity\n          ct[wr].total++\n          if (weaponIdList.includes(wk)) ct[wr].current++\n        })\n      ),\n    [weaponIdList]\n  )\n\n  return (\n    <ModalWrapper open={show} onClose={onHide}>\n      <CardDark>\n        <CardContent sx={{ py: 1 }}>\n          <Grid container spacing={1}>\n            <Grid item>\n              <WeaponToggle\n                value={weaponFilter}\n                totals={weaponTotals}\n                onChange={setWeaponfilter}\n                disabled={!!weaponTypeFilter}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item>\n              <RarityToggle\n                sx={{ height: '100%' }}\n                onChange={(rarity) => database.displayWeapon.set({ rarity })}\n                value={rarity}\n                totals={weaponRarityTotals}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item flexGrow={1}>\n              <TextField\n                autoFocus\n                size=\"small\"\n                value={searchTerm}\n                onChange={(e: ChangeEvent<HTMLTextAreaElement>) =>\n                  setSearchTerm(e.target.value)\n                }\n                label={t('weaponName')}\n                sx={{ height: '100%' }}\n                InputProps={{\n                  sx: { height: '100%' },\n                }}\n              />\n            </Grid>\n            <Grid item>\n              <CloseButton onClick={onHide} />\n            </Grid>\n          </Grid>\n        </CardContent>\n        <Divider />\n        <CardContent>\n          <Grid container spacing={1}>\n            {weaponIdList.map((weaponKey) => {\n              const weaponSheet = getWeaponSheet(weaponKey)\n              return (\n                <Grid item key={weaponKey} lg={3} md={4}>\n                  <CardLight sx={{ height: '100%' }}>\n                    <CardActionArea\n                      onClick={() => {\n                        onHide()\n                        onSelect(weaponKey)\n                      }}\n                      sx={{ display: 'flex' }}\n                    >\n                      <Box\n                        component=\"img\"\n                        src={weaponAsset(weaponKey, ascension >= 2)}\n                        sx={{ width: 100, height: 'auto' }}\n                        className={` grad-${weaponSheet.rarity}star`}\n                      />\n                      <Box sx={{ flexGrow: 1, px: 1 }}>\n                        <Typography variant=\"subtitle1\">\n                          {weaponSheet.name}\n                        </Typography>\n                        <Typography\n                          sx={{ display: 'flex', alignItems: 'baseline' }}\n                        >\n                          <ImgIcon\n                            size={1.5}\n                            src={\n                              imgAssets.weaponTypes?.[weaponSheet.weaponType]\n                            }\n                          />\n                          <StarsDisplay stars={weaponSheet.rarity} colored />\n                        </Typography>\n                      </Box>\n                    </CardActionArea>\n                  </CardLight>\n                </Grid>\n              )\n            })}\n          </Grid>\n        </CardContent>\n        <Divider />\n        <CardContent sx={{ py: 1 }}>\n          <CloseButton large onClick={onHide} />\n        </CardContent>\n      </CardDark>\n    </ModalWrapper>\n  )\n}\n","import type { CharacterKey } from '@genshin-optimizer/consts'\nimport {\n  allCharacterKeys,\n  allElementKeys,\n  allWeaponTypeKeys,\n} from '@genshin-optimizer/consts'\nimport { characterAsset } from '@genshin-optimizer/gi-assets'\nimport { ascensionMaxLevel } from '@genshin-optimizer/gi-util'\nimport { useBoolState, useForceUpdate } from '@genshin-optimizer/react-util'\nimport { filterFunction, sortFunction } from '@genshin-optimizer/util'\nimport { Favorite, FavoriteBorder } from '@mui/icons-material'\nimport type { TooltipProps } from '@mui/material'\nimport {\n  Box,\n  CardActionArea,\n  CardContent,\n  Divider,\n  Grid,\n  IconButton,\n  styled,\n  TextField,\n  Tooltip,\n  tooltipClasses,\n  Typography,\n} from '@mui/material'\nimport type { ChangeEvent } from 'react'\nimport {\n  useContext,\n  useDeferredValue,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react'\nimport { useTranslation } from 'react-i18next'\nimport CardDark from '../Components/Card/CardDark'\nimport CardLight from '../Components/Card/CardLight'\nimport CharacterCard from '../Components/Character/CharacterCard'\nimport CloseButton from '../Components/CloseButton'\nimport ModalWrapper from '../Components/ModalWrapper'\nimport SortByButton from '../Components/SortByButton'\nimport SqBadge from '../Components/SqBadge'\nimport { StarsDisplay } from '../Components/StarDisplay'\nimport ElementToggle from '../Components/ToggleButton/ElementToggle'\nimport WeaponToggle from '../Components/ToggleButton/WeaponToggle'\nimport { DataContext } from '../Context/DataContext'\nimport { SillyContext } from '../Context/SillyContext'\nimport { getCharSheet } from '../Data/Characters'\nimport type CharacterSheet from '../Data/Characters/CharacterSheet'\nimport { DatabaseContext } from '../Database/Database'\nimport useCharacter from '../ReactHooks/useCharacter'\nimport useCharMeta from '../ReactHooks/useCharMeta'\nimport useDBMeta from '../ReactHooks/useDBMeta'\nimport type { ICachedCharacter } from '../Types/character'\nimport { iconAsset } from '../Util/AssetUtil'\nimport type { CharacterSortKey } from '../Util/CharacterSort'\nimport {\n  characterFilterConfigs,\n  characterSortConfigs,\n  characterSortMap,\n} from '../Util/CharacterSort'\nimport { catTotal } from '../Util/totalUtils'\n\ntype characterFilter = (\n  character: ICachedCharacter | undefined,\n  sheet: CharacterSheet\n) => boolean\n\ntype CharacterSelectionModalProps = {\n  show: boolean\n  newFirst?: boolean\n  onHide: () => void\n  onSelect?: (ckey: CharacterKey) => void\n  filter?: characterFilter\n}\nconst sortKeys = Object.keys(characterSortMap)\nexport default function CharacterSelectionModal({\n  show,\n  onHide,\n  onSelect,\n  filter = () => true,\n  newFirst = false,\n}: CharacterSelectionModalProps) {\n  const { t } = useTranslation([\n    'page_character',\n    // Always load these 2 so character names are loaded for searching/sorting\n    'sillyWisher_charNames',\n    'charNames_gen',\n  ])\n  const { silly } = useContext(SillyContext)\n  const { database } = useContext(DatabaseContext)\n  const [state, setState] = useState(() => database.displayCharacter.get())\n  useEffect(\n    () => database.displayCharacter.follow((r, s) => setState(s)),\n    [database, setState]\n  )\n\n  const { gender } = useDBMeta()\n\n  const [dbDirty, forceUpdate] = useForceUpdate()\n\n  // character favorite updater\n  useEffect(\n    () => database.charMeta.followAny(() => forceUpdate()),\n    [forceUpdate, database]\n  )\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const deferredSearchTerm = useDeferredValue(searchTerm)\n  const deferredState = useDeferredValue(state)\n  const deferredDbDirty = useDeferredValue(dbDirty)\n  const characterKeyList = useMemo(() => {\n    const { element, weaponType, sortType, ascending } = deferredState\n    const sortByKeys = [\n      ...(newFirst ? ['new'] : []),\n      ...(characterSortMap[sortType] ?? []),\n    ] as CharacterSortKey[]\n    return (\n      deferredDbDirty &&\n      allCharacterKeys\n        .filter((key) =>\n          filter(database.chars.get(key), getCharSheet(key, gender))\n        )\n        .filter(\n          filterFunction(\n            { element, weaponType, name: deferredSearchTerm },\n            characterFilterConfigs(database, silly)\n          )\n        )\n        .sort(\n          sortFunction(\n            sortByKeys,\n            ascending,\n            characterSortConfigs(database, silly),\n            ['new', 'favorite']\n          )\n        )\n    )\n  }, [\n    deferredState,\n    newFirst,\n    deferredDbDirty,\n    deferredSearchTerm,\n    database,\n    silly,\n    filter,\n    gender,\n  ])\n\n  const weaponTotals = useMemo(\n    () =>\n      catTotal(allWeaponTypeKeys, (ct) =>\n        allCharacterKeys.forEach((ck) => {\n          const wtk = getCharSheet(ck, database.gender).weaponTypeKey\n          ct[wtk].total++\n          if (characterKeyList.includes(ck)) ct[wtk].current++\n        })\n      ),\n    [characterKeyList, database]\n  )\n\n  const elementTotals = useMemo(\n    () =>\n      catTotal(allElementKeys, (ct) =>\n        allCharacterKeys.forEach((ck) => {\n          const ele = getCharSheet(ck, database.gender).elementKey\n          ct[ele].total++\n          if (characterKeyList.includes(ck)) ct[ele].current++\n        })\n      ),\n    [characterKeyList, database]\n  )\n\n  const { weaponType, element, sortType, ascending } = state\n\n  return (\n    <ModalWrapper\n      open={show}\n      onClose={onHide}\n      sx={{ '& .MuiContainer-root': { justifyContent: 'normal' } }}\n    >\n      <CardDark>\n        <CardContent\n          sx={{\n            py: 1,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n            flexWrap: 'wrap',\n          }}\n        >\n          <WeaponToggle\n            sx={{ height: '100%' }}\n            onChange={(weaponType) =>\n              database.displayCharacter.set({ weaponType })\n            }\n            value={weaponType}\n            totals={weaponTotals}\n            size=\"small\"\n          />\n          <ElementToggle\n            sx={{ height: '100%' }}\n            onChange={(element) => database.displayCharacter.set({ element })}\n            value={element}\n            totals={elementTotals}\n            size=\"small\"\n          />\n          <Box flexGrow={1}>\n            <TextField\n              autoFocus\n              value={searchTerm}\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) =>\n                setSearchTerm(e.target.value)\n              }\n              label={t('characterName')}\n              size=\"small\"\n              sx={{ height: '100%' }}\n              InputProps={{\n                sx: { height: '100%' },\n              }}\n            />\n          </Box>\n          <SortByButton\n            sx={{ height: '100%' }}\n            sortKeys={sortKeys}\n            value={sortType}\n            onChange={(sortType) => database.displayCharacter.set({ sortType })}\n            ascending={ascending}\n            onChangeAsc={(ascending) =>\n              database.displayCharacter.set({ ascending })\n            }\n          />\n          <CloseButton onClick={onHide} />\n        </CardContent>\n        <Divider />\n        <DataContext.Provider value={{ teamData: undefined } as any}>\n          <CardContent>\n            <Grid\n              container\n              spacing={1}\n              columns={{ xs: 2, sm: 3, md: 4, lg: 5 }}\n            >\n              {characterKeyList.map((characterKey) => (\n                <Grid item key={characterKey} xs={1}>\n                  <SelectionCard\n                    characterKey={characterKey}\n                    onClick={() => {\n                      onHide()\n                      onSelect?.(characterKey)\n                    }}\n                  />\n                </Grid>\n              ))}\n            </Grid>\n          </CardContent>\n        </DataContext.Provider>\n      </CardDark>\n    </ModalWrapper>\n  )\n}\n\nconst CustomTooltip = styled(({ className, ...props }: TooltipProps) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    padding: 0,\n  },\n})\n\nfunction SelectionCard({\n  characterKey,\n  onClick,\n}: {\n  characterKey: CharacterKey\n  onClick: () => void\n}) {\n  const { gender } = useDBMeta()\n  const characterSheet = getCharSheet(characterKey, gender)\n  const character = useCharacter(characterKey)\n  const { favorite } = useCharMeta(characterKey)\n  const { database } = useContext(DatabaseContext)\n  const { silly } = useContext(SillyContext)\n\n  const [open, onOpen, onClose] = useBoolState()\n\n  const { level = 1, ascension = 0, constellation = 0 } = character ?? {}\n  return (\n    <CustomTooltip\n      enterDelay={300}\n      enterNextDelay={300}\n      arrow\n      placement=\"bottom\"\n      open={open}\n      onClose={onClose}\n      onOpen={onOpen}\n      title={\n        <Box sx={{ width: 300 }}>\n          <CharacterCard hideStats characterKey={characterKey} />\n        </Box>\n      }\n    >\n      <Box>\n        <CardLight\n          sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column' }}\n        >\n          <Box sx={{ position: 'absolute', opacity: 0.7, zIndex: 2 }}>\n            <IconButton\n              sx={{ p: 0.25 }}\n              onClick={(_) => {\n                onClose()\n                database.charMeta.set(characterKey, { favorite: !favorite })\n              }}\n            >\n              {favorite ? <Favorite /> : <FavoriteBorder />}\n            </IconButton>\n          </Box>\n          <CardActionArea onClick={onClick}>\n            <Box\n              display=\"flex\"\n              position=\"relative\"\n              className={`grad-${characterSheet?.rarity}star`}\n              sx={{\n                '&::before': {\n                  content: '\"\"',\n                  display: 'block',\n                  position: 'absolute',\n                  left: 0,\n                  top: 0,\n                  width: '100%',\n                  height: '100%',\n                  opacity: 0.5,\n                  backgroundImage: `url(${characterAsset(\n                    characterKey,\n                    'banner',\n                    gender\n                  )})`,\n                  backgroundPosition: 'center',\n                  backgroundSize: 'cover',\n                },\n              }}\n              width=\"100%\"\n            >\n              <Box\n                flexShrink={1}\n                sx={{ maxWidth: { xs: '33%', lg: '30%' } }}\n                alignSelf=\"flex-end\"\n                display=\"flex\"\n                flexDirection=\"column\"\n                zIndex={1}\n              >\n                <Box\n                  component=\"img\"\n                  src={iconAsset(characterKey, gender, silly)}\n                  width=\"100%\"\n                  height=\"auto\"\n                  maxWidth={256}\n                  sx={{ mt: 'auto' }}\n                />\n              </Box>\n              <Box\n                flexGrow={1}\n                sx={{ pr: 1, pt: 1 }}\n                display=\"flex\"\n                flexDirection=\"column\"\n                zIndex={1}\n                justifyContent=\"space-evenly\"\n              >\n                <Typography variant=\"body2\" sx={{ flexGrow: 1 }}>\n                  <SqBadge\n                    color={characterSheet?.elementKey}\n                    sx={{ opacity: 0.85, textShadow: '0 0 5px gray' }}\n                  >\n                    {characterSheet?.name}\n                  </SqBadge>\n                </Typography>\n                {character ? (\n                  <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                    <Box sx={{ textShadow: '0 0 5px gray' }}>\n                      <Typography\n                        variant=\"body2\"\n                        component=\"span\"\n                        whiteSpace=\"nowrap\"\n                      >\n                        Lv. {level}\n                      </Typography>\n                      <Typography\n                        variant=\"body2\"\n                        component=\"span\"\n                        color=\"text.secondary\"\n                      >\n                        /{ascensionMaxLevel[ascension]}\n                      </Typography>\n                    </Box>\n                    <Typography variant=\"body2\">C{constellation}</Typography>\n                  </Box>\n                ) : (\n                  <Typography component=\"span\" variant=\"body2\">\n                    <SqBadge>NEW</SqBadge>\n                  </Typography>\n                )}\n                <StarsDisplay stars={characterSheet?.rarity ?? 1} colored />\n              </Box>\n            </Box>\n          </CardActionArea>\n        </CardLight>\n      </Box>\n    </CustomTooltip>\n  )\n}\n","import { imgAssets } from '@genshin-optimizer/gi-assets'\nimport { MINUTE_MS, timeString } from '@genshin-optimizer/util'\nimport {\n  Button,\n  ButtonGroup,\n  CardContent,\n  Divider,\n  Grid,\n  InputBase,\n  Typography,\n} from '@mui/material'\nimport { useContext, useEffect, useRef, useState } from 'react'\nimport CardDark from '../Components/Card/CardDark'\nimport ImgIcon from '../Components/Image/ImgIcon'\nimport { DatabaseContext } from '../Database/Database'\nimport { RESIN_MAX } from '../Database/DataEntries/DisplayTool'\n\nexport const RESIN_RECH_MS = 8 * MINUTE_MS\n\nexport default function ResinCounter() {\n  const { database } = useContext(DatabaseContext)\n  const [{ resin, resinDate }, setState] = useState(() =>\n    database.displayTool.get()\n  )\n  useEffect(\n    () => database.displayTool.follow((r, s) => setState(s)),\n    [database]\n  )\n  const resinIncrement = useRef(undefined as undefined | NodeJS.Timeout)\n\n  const setResin = (newResin: number) => {\n    if (newResin >= RESIN_MAX) {\n      resinIncrement.current && clearTimeout(resinIncrement.current)\n      resinIncrement.current = undefined\n    } else\n      resinIncrement.current = setTimeout(\n        () => console.log('set resin', newResin + 1),\n        RESIN_RECH_MS\n      )\n    database.displayTool.set({\n      resin: newResin,\n      resinDate: new Date().getTime(),\n    })\n  }\n\n  useEffect(() => {\n    if (resin < RESIN_MAX) {\n      const now = Date.now()\n      const resinToMax = RESIN_MAX - resin\n      const resinSinceLastDate = Math.min(\n        Math.floor((now - resinDate) / RESIN_RECH_MS),\n        resinToMax\n      )\n      const catchUpResin = resin + resinSinceLastDate\n      const newDate = resinDate + resinSinceLastDate * RESIN_RECH_MS\n      database.displayTool.set({ resin: catchUpResin, resinDate: newDate })\n      if (catchUpResin < RESIN_MAX)\n        resinIncrement.current = setTimeout(\n          () => setResin(catchUpResin + 1),\n          now - newDate\n        )\n    }\n    return () => resinIncrement.current && clearTimeout(resinIncrement.current)\n    // eslint-disable-next-line\n  }, [])\n\n  const nextResinDateNum =\n    resin >= RESIN_MAX ? resinDate : resinDate + RESIN_RECH_MS\n\n  const resinFullDateNum =\n    resin >= RESIN_MAX\n      ? resinDate\n      : resinDate + (RESIN_MAX - resin) * RESIN_RECH_MS\n  const resinFullDate = new Date(resinFullDateNum)\n\n  const nextDeltaString = timeString(Math.abs(nextResinDateNum - Date.now()))\n\n  return (\n    <CardDark>\n      <Grid container sx={{ px: 2, py: 1 }} spacing={2}>\n        <Grid item>\n          <ImgIcon src={imgAssets.resin.fragile} size={2} />\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h6\">Resin Counter</Typography>\n        </Grid>\n      </Grid>\n      <Divider />\n      <CardContent>\n        <Grid container spacing={2}>\n          <Grid item>\n            <Typography variant=\"h2\">\n              <ImgIcon src={imgAssets.resin.fragile} />\n              <InputBase\n                type=\"number\"\n                sx={{ width: '2em', fontSize: '4rem' }}\n                value={resin}\n                inputProps={{ min: 0, max: 999, sx: { textAlign: 'right' } }}\n                onChange={(e) => setResin(parseInt(e.target.value))}\n              />\n              <span>/{RESIN_MAX}</span>\n            </Typography>\n          </Grid>\n          <Grid item flexGrow={1}>\n            <ButtonGroup fullWidth>\n              <Button onClick={() => setResin(0)} disabled={resin === 0}>\n                0\n              </Button>\n              <Button\n                onClick={() => setResin(resin - 1)}\n                disabled={resin === 0}\n              >\n                -1\n              </Button>\n              <Button\n                onClick={() => setResin(resin - 20)}\n                disabled={resin < 20}\n              >\n                -20\n              </Button>\n              <Button\n                onClick={() => setResin(resin - 40)}\n                disabled={resin < 40}\n              >\n                -40\n              </Button>\n              <Button\n                onClick={() => setResin(resin - 60)}\n                disabled={resin < 60}\n              >\n                -60\n              </Button>\n              <Button onClick={() => setResin(resin + 1)}>+1</Button>\n              <Button onClick={() => setResin(resin + 60)}>+60</Button>\n              <Button\n                onClick={() => setResin(RESIN_MAX)}\n                disabled={resin === RESIN_MAX}\n              >\n                MAX {RESIN_MAX}\n              </Button>\n            </ButtonGroup>\n            <Typography variant=\"subtitle1\" sx={{ mt: 2 }}>\n              {resin < RESIN_MAX ? (\n                <span>\n                  Next resin in {nextDeltaString}, full Resin at{' '}\n                  {resinFullDate.toLocaleTimeString()}{' '}\n                  {resinFullDate.toLocaleDateString()}\n                </span>\n              ) : (\n                <span>\n                  Resin has been full for at least {nextDeltaString}, since{' '}\n                  {resinFullDate.toLocaleTimeString()}{' '}\n                  {resinFullDate.toLocaleDateString()}\n                </span>\n              )}\n            </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            <Typography variant=\"caption\">\n              Because we do not provide a mechanism to synchronize resin time,\n              actual resin recharge time might be as much as 8 minutes earlier\n              than predicted.\n            </Typography>\n          </Grid>\n        </Grid>\n      </CardContent>\n    </CardDark>\n  )\n}\n","import { imgAssets, weaponAsset } from '@genshin-optimizer/gi-assets'\nimport { ascensionMaxLevel } from '@genshin-optimizer/gi-util'\nimport { Lock, LockOpen } from '@mui/icons-material'\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever'\nimport EditIcon from '@mui/icons-material/Edit'\nimport {\n  Box,\n  Button,\n  CardActionArea,\n  CardContent,\n  IconButton,\n  Skeleton,\n  Tooltip,\n  Typography,\n} from '@mui/material'\nimport { Suspense, useCallback, useContext, useMemo } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport CardLight from '../Components/Card/CardLight'\nimport { LocationAutocomplete } from '../Components/Character/LocationAutocomplete'\nimport LocationName from '../Components/Character/LocationName'\nimport ConditionalWrapper from '../Components/ConditionalWrapper'\nimport ImgIcon from '../Components/Image/ImgIcon'\nimport { StarsDisplay } from '../Components/StarDisplay'\nimport type CharacterSheet from '../Data/Characters/CharacterSheet'\nimport { getWeaponSheet } from '../Data/Weapons'\nimport { DatabaseContext } from '../Database/Database'\nimport { uiInput as input } from '../Formula'\nimport { computeUIData, dataObjForWeapon } from '../Formula/api'\nimport { nodeVStr } from '../Formula/uiData'\nimport useWeapon from '../ReactHooks/useWeapon'\nimport type { LocationKey } from '../Types/consts'\n\ntype WeaponCardProps = {\n  weaponId: string\n  onClick?: (weaponId: string) => void\n  onEdit?: (weaponId: string) => void\n  onDelete?: (weaponId: string) => void\n  canEquip?: boolean\n  extraButtons?: JSX.Element\n}\nexport default function WeaponCard({\n  weaponId,\n  onClick,\n  onEdit,\n  onDelete,\n  canEquip = false,\n  extraButtons,\n}: WeaponCardProps) {\n  const { t } = useTranslation(['page_weapon', 'ui'])\n  const { database } = useContext(DatabaseContext)\n  const databaseWeapon = useWeapon(weaponId)\n  const weapon = databaseWeapon\n  const weaponSheet = weapon?.key ? getWeaponSheet(weapon.key) : undefined\n\n  const filter = useCallback(\n    (cs: CharacterSheet) => cs.weaponTypeKey === weaponSheet?.weaponType,\n    [weaponSheet]\n  )\n\n  const wrapperFunc = useCallback(\n    (children) => (\n      <CardActionArea onClick={() => onClick?.(weaponId)}>\n        {children}\n      </CardActionArea>\n    ),\n    [onClick, weaponId]\n  )\n  const falseWrapperFunc = useCallback((children) => <Box>{children}</Box>, [])\n  const setLocation = useCallback(\n    (k: LocationKey) =>\n      weaponId && database.weapons.set(weaponId, { location: k }),\n    [database, weaponId]\n  )\n\n  const UIData = useMemo(\n    () =>\n      weaponSheet &&\n      weapon &&\n      computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]),\n    [weaponSheet, weapon]\n  )\n\n  if (!weapon || !weaponSheet || !UIData) return null\n  const { level, ascension, refinement, id, location = '', lock } = weapon\n  const weaponTypeKey = UIData.get(input.weapon.type).value!\n  const stats = [input.weapon.main, input.weapon.sub, input.weapon.sub2].map(\n    (x) => UIData.get(x)\n  )\n  const img = weaponAsset(weapon.key, ascension >= 2)\n\n  return (\n    <Suspense\n      fallback={\n        <Skeleton\n          variant=\"rectangular\"\n          sx={{ width: '100%', height: '100%', minHeight: 300 }}\n        />\n      }\n    >\n      <CardLight\n        sx={{\n          height: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n        }}\n      >\n        <ConditionalWrapper\n          condition={!!onClick}\n          wrapper={wrapperFunc}\n          falseWrapper={falseWrapperFunc}\n        >\n          <Box\n            className={`grad-${weaponSheet.rarity}star`}\n            sx={{ position: 'relative', pt: 2, px: 2 }}\n          >\n            {!onClick && (\n              <IconButton\n                color=\"primary\"\n                onClick={() => database.weapons.set(id, { lock: !lock })}\n                sx={{ position: 'absolute', right: 0, bottom: 0, zIndex: 2 }}\n              >\n                {lock ? <Lock /> : <LockOpen />}\n              </IconButton>\n            )}\n            <Box sx={{ position: 'relative', zIndex: 1 }}>\n              <Box\n                component=\"div\"\n                sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}\n              >\n                <ImgIcon size={2} src={imgAssets.weaponTypes[weaponTypeKey]} />\n                <Typography\n                  noWrap\n                  sx={{\n                    textAlign: 'center',\n                    backgroundColor: 'rgba(100,100,100,0.35)',\n                    borderRadius: '1em',\n                    px: 1,\n                  }}\n                >\n                  <strong>{weaponSheet.name}</strong>\n                </Typography>\n              </Box>\n              <Typography component=\"span\" variant=\"h5\">\n                Lv. {level}\n              </Typography>\n              <Typography component=\"span\" variant=\"h5\" color=\"text.secondary\">\n                /{ascensionMaxLevel[ascension]}\n              </Typography>\n              <Typography variant=\"h6\">\n                Refinement <strong>{refinement}</strong>\n              </Typography>\n              <StarsDisplay stars={weaponSheet.rarity} colored />\n            </Box>\n            <Box\n              sx={{ height: '100%', position: 'absolute', right: 0, top: 0 }}\n            >\n              <Box\n                component=\"img\"\n                src={img ?? ''}\n                width=\"auto\"\n                height=\"100%\"\n                sx={{ float: 'right' }}\n              />\n            </Box>\n          </Box>\n          <CardContent>\n            {stats.map((node) => {\n              if (!node.info.name) return null\n              return (\n                <Box key={JSON.stringify(node.info)} sx={{ display: 'flex' }}>\n                  <Typography flexGrow={1}>\n                    {node.info.icon} {node.info.name}\n                  </Typography>\n                  <Typography>{nodeVStr(node)}</Typography>\n                </Box>\n              )\n            })}\n          </CardContent>\n        </ConditionalWrapper>\n        <Box\n          sx={{\n            p: 1,\n            display: 'flex',\n            gap: 1,\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <Box sx={{ flexGrow: 1 }}>\n            {canEquip ? (\n              <LocationAutocomplete\n                location={location}\n                setLocation={setLocation}\n                filter={filter}\n                autoCompleteProps={{ getOptionDisabled: (t) => !t.key }}\n              />\n            ) : (\n              <LocationName location={location} />\n            )}\n          </Box>\n          <Box\n            display=\"flex\"\n            gap={1}\n            alignItems=\"stretch\"\n            height=\"100%\"\n            sx={{ '& .MuiButton-root': { minWidth: 0, height: '100%' } }}\n          >\n            {!!onEdit && (\n              <Tooltip\n                title={<Typography>{t`page_weapon:edit`}</Typography>}\n                placement=\"top\"\n                arrow\n              >\n                <Button color=\"info\" size=\"small\" onClick={() => onEdit(id)}>\n                  <EditIcon />\n                </Button>\n              </Tooltip>\n            )}\n            {!!onDelete && (\n              <Button\n                color=\"error\"\n                size=\"small\"\n                onClick={() => onDelete(id)}\n                disabled={!!location || lock}\n              >\n                <DeleteForeverIcon />\n              </Button>\n            )}\n            {extraButtons}\n          </Box>\n        </Box>\n      </CardLight>\n    </Suspense>\n  )\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckBox');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlank');\nexports.default = _default;","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'ChevronRight');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\n}), 'InsertLink');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\"\n}), 'Replay');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z\"\n}), 'YouTube');","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n"],"names":["ArtifactSetAutocomplete","artSetKey","setArtSetKey","label","props","t","useTranslation","options","useMemo","Object","entries","setKeysByRarities","flatMap","rarity","sets","map","set","key","grouper","sort","sortByRarityAndName","toImg","useCallback","src","artifactDefIcon","size","undefined","onChange","k","valueKey","groupBy","option","toString","renderGroup","params","group","component","Box","sx","top","stars","inline","children","styled","width","height","DisabledButton","Button","theme","backgroundColor","palette","primary","dark","color","text","secondary","TextButton","disabled","rarityHandler","handleMultiSelect","allRarityKeys","RarityToggle","value","totals","useTheme","xs","useMediaQuery","breakpoints","up","exclusive","star","p","minWidth","display","gap","onClick","WeaponSelectionModal","show","ascension","onHide","onSelect","filter","weaponTypeFilter","weaponFilter","setWeaponfilter","useState","allWeaponTypeKeys","database","useContext","DatabaseContext","state","setState","displayWeapon","get","useEffect","follow","r","dbMeta","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","weaponIdList","allWeaponKeys","wKey","getWeaponSheet","includes","weaponType","toLowerCase","a","b","weaponTotals","catTotal","ct","forEach","wk","wtk","total","current","weaponRarityTotals","wr","open","onClose","py","container","spacing","item","flexGrow","autoFocus","e","target","InputProps","weaponKey","weaponSheet","lg","md","weaponAsset","className","px","variant","name","alignItems","imgAssets","weaponTypes","colored","large","sortKeys","keys","characterSortMap","CharacterSelectionModal","newFirst","silly","SillyContext","displayCharacter","s","gender","useDBMeta","dbDirty","forceUpdate","useForceUpdate","charMeta","followAny","deferredState","deferredDbDirty","characterKeyList","element","sortType","ascending","sortByKeys","allCharacterKeys","chars","getCharSheet","filterFunction","characterFilterConfigs","sortFunction","characterSortConfigs","ck","weaponTypeKey","elementTotals","allElementKeys","ele","elementKey","justifyContent","flexWrap","onChangeAsc","Provider","teamData","columns","sm","characterKey","SelectionCard","CustomTooltip","classes","popper","tooltipClasses","tooltip","padding","characterSheet","character","useCharacter","favorite","useCharMeta","onOpen","useBoolState","level","constellation","enterDelay","enterNextDelay","arrow","placement","title","hideStats","flexDirection","position","opacity","zIndex","_","content","left","backgroundImage","characterAsset","backgroundPosition","backgroundSize","flexShrink","maxWidth","alignSelf","iconAsset","mt","pr","pt","textShadow","whiteSpace","ascensionMaxLevel","RESIN_RECH_MS","MINUTE_MS","ResinCounter","resin","resinDate","displayTool","resinIncrement","useRef","setResin","newResin","RESIN_MAX","clearTimeout","setTimeout","console","log","Date","getTime","now","resinToMax","resinSinceLastDate","Math","min","floor","catchUpResin","newDate","nextResinDateNum","resinFullDateNum","resinFullDate","nextDeltaString","timeString","abs","fragile","type","fontSize","inputProps","max","textAlign","parseInt","fullWidth","toLocaleTimeString","toLocaleDateString","WeaponCard","weaponId","onEdit","onDelete","canEquip","extraButtons","weapon","useWeapon","cs","wrapperFunc","falseWrapperFunc","setLocation","weapons","location","UIData","computeUIData","data","dataObjForWeapon","refinement","id","lock","input","stats","main","sub","sub2","x","img","Suspense","fallback","minHeight","condition","wrapper","falseWrapper","right","bottom","mb","noWrap","borderRadius","float","node","info","icon","nodeVStr","JSON","stringify","autoCompleteProps","getOptionDisabled","_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","module","shim","propName","componentName","propFullName","secret","err","Error","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes"],"sourceRoot":""}