"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[478,775],{29754:(e,a,t)=>{var n=t(95938);a.Z=void 0;var o=n(t(68671)),s=t(52322),l=(0,o.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.Z=l},92252:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(6620),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},54278:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(6620),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock")},40535:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(6620),o=t(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen")},43007:(e,a,t)=>{t.d(a,{W:()=>m});var n=t(82799),o=t(66615),s=t(79906),l=t(2784),r=t(21560),c=t(97169),i=t(25870),u=t(10002),p=t(36893),d=t(86482),h=t(20353),Z=t(52903);let g,f=e=>e;function m({location:e,setLocation:a,filter:t=(()=>!0),autoCompleteProps:m={}}){const{t:v}=(0,r.$G)(["ui","artifact","sillyWisher_charNames","charNames_gen"]),{database:w}=(0,l.useContext)(i.t),{gender:y}=(0,u.Z)(),x=(0,l.useCallback)((e=>v(`sillyWisher_charNames:${(0,p.LP)(w.chars.LocationToCharacterKey(e),y)}`)),[w,y,v]),b=(0,l.useCallback)((e=>v(`charNames_gen:${(0,p.LP)(w.chars.LocationToCharacterKey(e),y)}`)),[w,y,v]),C=(0,l.useCallback)((e=>""===e?(0,Z.tZ)(o.Z,{}):(0,Z.tZ)(h.Z,{characterKey:w.chars.LocationToCharacterKey(e)})),[w]),k=(0,l.useCallback)((e=>"Traveler"===e?n.vF.some((e=>w.charMeta.get(e).favorite)):!!e&&w.charMeta.get(e).favorite),[w]),W=(0,l.useMemo)((()=>[{key:"",label:v(g||(g=f`artifact:filterLocation.inventory`))},...Array.from(new Set(w.chars.keys.filter((e=>!(0,c.m)(e,y)||t((0,c.m)(e,y)))).map((e=>(0,n.V7)(e))))).map((e=>({key:e,label:x(e),favorite:k(e),alternateNames:[b(e)]}))).sort(((e,a)=>e.favorite&&!a.favorite?-1:!e.favorite&&a.favorite?1:e.label.localeCompare(a.label)))]),[v,w.chars.keys,y,t,x,k,b]);return(0,Z.tZ)(l.Suspense,{fallback:(0,Z.tZ)(s.Z,{variant:"text",width:100}),children:(0,Z.tZ)(d._,Object.assign({size:"small",options:W,valueKey:e,onChange:e=>a(null!=e?e:""),toImg:C},m))})}},29117:(e,a,t)=>{t.d(a,{Z:()=>f});var n=t(98283),o=t(47746),s=t(86432),l=t(92794),r=t(66198),c=t(79536),i=t(82799),u=t(10618),p=t(26578),d=t(29432),h=t(52903);const Z=["value","totals","onChange"],g=(0,u.X)([...i.yd]);function f(e){let{value:a,totals:t,onChange:u}=e,f=(0,n.Z)(e,Z);const m=(0,o.Z)(),v=!(0,s.Z)(m.breakpoints.up("sm"));return(0,h.tZ)(d.Z,Object.assign({exclusive:!0,value:a},f,{children:i.yd.map((e=>{var n;return(0,h.BX)(l.Z,{value:e,sx:{p:v?1:void 0,minWidth:v?0:"7em",display:"flex",gap:v?0:1},onClick:()=>u(g(a,e)),children:[(0,h.tZ)(p.Z,{src:null==(n=c.Z.weaponTypes)?void 0:n[e],size:2,sideMargin:!0}),(0,h.tZ)(r.Z,{label:t[e],size:"small"})]},e)}))}))}},61523:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var n=t(82799),o=t(92252),s=t(67550),l=t(7671),r=t(13780),c=t(5896),i=t(79906),u=t(83249),p=t(41075),d=t(62197),h=t(2784),Z=t(61877),g=t(21560),f=t(87985),m=t(46026),v=t(62978),w=t(29117),y=t(74001),x=t(25870),b=t(36617),C=t(82716),k=t(1661),W=t(40775),I=t(41015),S=t(77712),z=t(64120),M=t(3694),P=t(52903);const T=h.lazy((()=>t.e(592).then(t.bind(t,89431)))),L=(0,h.lazy)((()=>t.e(878).then(t.bind(t,15878)))),j={xs:1,sm:2,md:3,lg:3,xl:4},E={xs:10,sm:12,md:24,lg:24,xl:24},N=Object.keys(S.gd);function V(){const{t:e}=(0,g.$G)(["page_weapon","ui","weaponNames_gen"]),{database:a}=(0,h.useContext)(x.t),[t,d]=(0,h.useState)(a.displayWeapon.get());(0,h.useEffect)((()=>a.displayWeapon.follow(((e,a)=>d(a)))),[a]);const[V,X]=(0,h.useState)(!1),[_,B]=(0,b.Z)(),H=(0,h.useRef)(null),[K,O]=(0,h.useState)(0);(0,h.useEffect)((()=>(Z.ZP.send({hitType:"pageview",page:"/weapon"}),a.weapons.followAny(((e,a)=>("new"===a||"remove"===a)&&B())))),[B,a]);const A=(0,C.Z)(),D=E[A],G=(0,h.useCallback)((async n=>{const o=a.weapons.get(n);if(!o)return;const s=e(`weaponNames_gen:${o.key}`);window.confirm(e("removeWeapon",{value:s}))&&(a.weapons.remove(n),t.editWeaponId===n&&a.displayWeapon.set({editWeaponId:""}))}),[t.editWeaponId,a,e]),F=(0,h.useCallback)((e=>{a.displayWeapon.set({editWeaponId:e})}),[a]),q=(0,h.useCallback)((e=>{F(a.weapons.new((0,z.xg)(e)))}),[a,F]),[R,U]=(0,h.useState)(""),J=(0,h.useDeferredValue)(R),{sortType:Q,ascending:Y,weaponType:ee,rarity:ae}=t,{weaponIdList:te,totalWeaponNum:ne}=(0,h.useMemo)((()=>{var e;const t=a.weapons.values,n=t.length,o=t.filter((0,k.C)({weaponType:ee,rarity:ae,name:J},(0,S.Xg)())).sort((0,k.e)(null!=(e=S.gd[Q])?e:[],Y,(0,S.Sn)())).map((e=>e.id));return _&&{weaponIdList:o,totalWeaponNum:n}}),[_,a,Q,Y,ae,ee,J]),{weaponIdsToShow:oe,numPages:se,currentPageIndex:le}=(0,h.useMemo)((()=>{const e=Math.ceil(te.length/D),a=(0,I.uZ)(K,0,e-1);return{weaponIdsToShow:te.slice(a*D,(a+1)*D),numPages:e,currentPageIndex:a}}),[te,K,D]),re=te.length!==ne?`${te.length}/${ne}`:`${ne}`,ce=(0,h.useCallback)(((e,a)=>{var t;null==(t=H.current)||t.scrollIntoView({behavior:"smooth"}),O(a-1)}),[O,H]),ie=(0,h.useCallback)((()=>a.displayWeapon.set({editWeaponId:""})),[a]),{editWeaponId:ue}=t;(0,h.useEffect)((()=>{ue&&(a.weapons.get(ue)||ie())}),[a,ue,ie]);const pe=(0,h.useMemo)((()=>(0,W.W)(n.yd,(e=>Object.entries(a.weapons.data).forEach((([a,t])=>{const n=(0,y.ub)(t.key).weaponType;e[n].total++,te.includes(a)&&e[n].current++}))))),[a,te]),de=(0,h.useMemo)((()=>(0,W.W)(n.U1,(e=>Object.entries(a.weapons.data).forEach((([a,t])=>{const n=(0,y.ub)(t.key).rarity;e[n].total++,te.includes(a)&&e[n].current++}))))),[a,te]);return(0,P.BX)(s.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,P.tZ)(h.Suspense,{fallback:!1,children:(0,P.tZ)(T,{show:V,onHide:()=>X(!1),onSelect:q})}),(0,P.tZ)(h.Suspense,{fallback:!1,children:(0,P.tZ)(L,{weaponId:ue,footer:!0,onClose:ie})}),(0,P.tZ)(f.Z,{ref:H,children:(0,P.BX)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,P.BX)(s.Z,{display:"flex",flexWrap:"wrap",gap:1,alignItems:"stretch",children:[(0,P.tZ)(w.Z,{onChange:e=>a.displayWeapon.set({weaponType:e}),value:ee,totals:pe,size:"small"}),(0,P.tZ)(v.Z,{sx:{height:"100%"},onChange:e=>a.displayWeapon.set({rarity:e}),value:ae,totals:de,size:"small"}),(0,P.tZ)(s.Z,{flexGrow:1}),(0,P.tZ)(r.Z,{autoFocus:!0,size:"small",value:R,onChange:e=>U(e.target.value),label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})]}),(0,P.BX)(s.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,P.tZ)(c.Z,{count:se,page:le+1,onChange:ce}),(0,P.tZ)($,{numShowing:oe.length,total:re,t:e}),(0,P.tZ)(m.Z,{sx:{height:"100%"},sortKeys:N,value:Q,onChange:e=>a.displayWeapon.set({sortType:e}),ascending:Y,onChangeAsc:e=>a.displayWeapon.set({ascending:e})})]})]})}),(0,P.BX)(h.Suspense,{fallback:(0,P.tZ)(i.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:[(0,P.tZ)(u.Z,{fullWidth:!0,onClick:()=>X(!0),color:"info",startIcon:(0,P.tZ)(o.Z,{}),children:e("page_weapon:addWeapon")}),(0,P.tZ)(p.ZP,{container:!0,spacing:1,columns:j,children:oe.map((e=>(0,P.tZ)(p.ZP,{item:!0,xs:1,children:(0,P.tZ)(M.Z,{weaponId:e,onDelete:G,onEdit:F,canEquip:!0})},e)))})]}),se>1&&(0,P.tZ)(f.Z,{children:(0,P.tZ)(l.Z,{children:(0,P.BX)(p.ZP,{container:!0,alignItems:"flex-end",children:[(0,P.tZ)(p.ZP,{item:!0,flexGrow:1,children:(0,P.tZ)(c.Z,{count:se,page:le+1,onChange:ce})}),(0,P.tZ)(p.ZP,{item:!0,children:(0,P.tZ)($,{numShowing:oe.length,total:re,t:e})})]})})})]})}function $({numShowing:e,total:a,t}){return(0,P.tZ)(d.Z,{color:"text.secondary",children:(0,P.BX)(g.cC,{t,i18nKey:"showingNum",count:e,value:a,children:["Showing ",(0,P.tZ)("b",{children:{count:e}})," out of"," ",{value:a}," Weapons"]})})}},94758:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(2784),o=t(25870);function s(e=""){const{database:a}=(0,n.useContext)(o.t),[t,s]=(0,n.useState)(a.weapons.get(e));return(0,n.useEffect)((()=>s(a.weapons.get(e))),[a,e]),(0,n.useEffect)((()=>e?a.weapons.follow(e,((e,a,t)=>"update"===a&&s(t))):void 0),[e,s,a]),t}},40775:(e,a,t)=>{t.d(a,{A:()=>o,W:()=>s});var n=t(41015);function o(e,a){const t=(0,n.xh)(e,(e=>l(e)));return a(t),(0,n.xh)(t,(e=>r(e)))}function s(e,a){const t=l(e);return a(t),r(t)}function l(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}function r(e){return(0,n.xh)(e,(({total:e,current:a})=>a===e?`${e}`:`${a}/${e}`))}}}]);